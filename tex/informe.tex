\documentclass[a4paper, 10pt, twoside]{article}

\usepackage[top=1in, bottom=1in, left=1in, right=1in]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[spanish, es-ucroman, es-noquoting]{babel}
\usepackage{setspace}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{verbatim}
\usepackage{fancyvrb}
\usepackage{graphicx}
\usepackage{float}
\usepackage{enumitem} % Provee macro \setlist
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{xspace}
\usepackage[toc, page]{appendix}


%%%%%%%%%% Constantes - Inicio %%%%%%%%%%
\newcommand{\titulo}{Trabajo Práctico 2}
\newcommand{\materia}{Bases de Datos}
\newcommand{\integrantes}{Delgado · Lovisolo · Petaccio · Rebecchi}
\newcommand{\cuatrimestre}{Segundo Cuatrimestre de 2014}
%%%%%%%%%% Constantes - Fin %%%%%%%%%%


%%%%%%%%%% Configuración de Fancyhdr - Inicio %%%%%%%%%%
\pagestyle{fancy}
\thispagestyle{fancy}
\lhead{\titulo\ · \materia}
\rhead{\integrantes}
\renewcommand{\footrulewidth}{0.4pt}
\cfoot{\thepage /\pageref{LastPage}}

\fancypagestyle{caratula} {
   \fancyhf{}
   \cfoot{\thepage /\pageref{LastPage}}
   \renewcommand{\headrulewidth}{0pt}
   \renewcommand{\footrulewidth}{0pt}
}
%%%%%%%%%% Configuración de Fancyhdr - Fin %%%%%%%%%%


%%%%%%%%%% Insertar gráfico - Inicio %%%%%%%%%%
\newcommand{\grafico}[3]{
  \begin{figure}[H]
    \includegraphics[type=pdf,ext=.pdf,read=.pdf]{#1}
    \caption{#2}
    \label{#3}
  \end{figure}
}
%%%%%%%%%% Insertar gráfico - Fin %%%%%%%%%%


%%%%%%%%%% Miscelánea - Inicio %%%%%%%%%%
% Evita que el documento se estire verticalmente para ocupar el espacio vacío
% en cada página.
\raggedbottom

% Separación entre párrafos.
\setlength{\parskip}{0.5em}

% Separación entre elementos de listas.
\setlist{itemsep=0.5em}

% Asigna la traducción de la palabra 'Appendices'.
\renewcommand{\appendixtocname}{Apéndices}
\renewcommand{\appendixpagename}{Apéndices}
%%%%%%%%%% Miscelánea - Fin %%%%%%%%%%


\begin{document}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Carátula                                                                   %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\thispagestyle{caratula}

\begin{center}

\includegraphics[height=2cm]{DC.png} 
\hfill
\includegraphics[height=2cm]{UBA.jpg} 

\vspace{2cm}

Departamento de Computación,\\
Facultad de Ciencias Exactas y Naturales,\\
Universidad de Buenos Aires

\vspace{4cm}

\begin{Huge}
\titulo
\end{Huge}

\vspace{0.5cm}

\begin{Large}
\materia
\end{Large}

\vspace{1cm}

\cuatrimestre

\vspace{4cm}

\begin{tabular}{|c|c|c|}
\hline
Apellido y Nombre & LU & E-mail\\
\hline
Delgado, Alejandro N.  & 601/11 & nahueldelgado@gmail.com\\
Lovisolo, Leandro      & 645/11 & leandro@leandro.me\\
Petaccio, Lautaro José & 443/11 & lausuper@gmail.com\\
Rebecchi, Alejandro    & 15/10  & alejandrorebecchi@gmail.com\\
\hline
\end{tabular}

\end{center}

\newpage


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Introducción                                                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Introducción}

Pendiente.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Estimadores                                                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Estimadores}

\subsection{Classic Histogram}

Este estimador se basa en un modelo de histograma en el cual cada barra representa un rango
de valores del mismo tamaño.
Es decir, al inicializar el estimador, se le pasa como parámetro el numero de barras que se
desea que tenga el histograma
y luego se utiliza dicho valor para dividir el rango de valores en partes iguales.
Para calcular la selectividad por igualdad se asume que todos los valores que pertenecen a
la misma barra tienen la
 misma cantidad de registros, por lo que se divide el numero de registros de dicha barra
  por la cantidad total y el numero de elementos por barra.
% no dividimos a su vez por el ancho de la barra ? SI %
Siguiendo la misma idea, para calcular la selectividad por mayor se suman todos los
registros que corresponden a las barras superiores a la que pertenece el elemento, mas los que se estima que son mayores dentro de la misma barra. Esto se calcula en base a la diferencia con el limite superior del intervalo que lo contiene.

\subsection{Distribution Steps}

En este caso se busca obtener un histograma con barrasde la misma altura variando el
tamaño de los intervalos que representa cada barra. De esta forma se busca tener mayor
 granularidad al en el caso de que para algunos valores tengamos mucha cantidad de
 registros y para otros no. para esto se arma un histograma dividiendo la cantidad de
 registros de la tabla N grupos de igual tamaño, siendo N pasado por parámetro al
 inicializarlo. Además se quiere que la suma de las estimaciones de las selectividades
 por moyor, menos e igual de un mismo valor sumen 1.
Por lo tanto para calcular la estimación de elementos mayores se asume que 1/3 de los
elementos del intervalo son mayores si el valor que se evalúa no es límite de un
intervalo. Para estimar la selectividad de la igualdad, se asume que aproximadamente
 1/3 de los elementos pertenecientes al grupo, son iguales al valor buscado,
 por lo que al sumarse con la selectividad de menor y mayor se llega a 1.

\subsection{Estimador Grupo}

En este estimador se busca aprovechar el tipo de histograma que se arma con distribution steps,
pero se busca mejorar el estimador por igualdad, ya que con una cantidad baja de steps, quedan muchos registros por
grupo y generalmente estimar que 1/3 de ellos son iguales al valor que buscamos trae un error muy grande.
Por lo tanto para estimar la cantidad de elementos iguales a uno dado

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Análisis Teório                                                            %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Análisis Teórico}

Pendiente

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Análisis Empírico                                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Análisis Empírico}

Pendiente.


\subsection{Datasets utilizados}

A continuación se ilustran los datasets utilizados durante el análisis de performance de los estimadores estudiados.

\grafico{custom-dataset-uniform}
        {Distribución uniforme}
        {custom-dataset-uniform}

\grafico{custom-dataset-normal}
        {Distribución normal}
        {custom-dataset-normal}


\subsection{Estimador \texttt{ClassicHistogram}}

\grafico{plot-hist-uniform-equal}
        {Distribución uniforme, consulta por igualdad.}
        {plot-hist-uniform-equal}
\grafico{plot-hist-uniform-greater}
        {Distribución uniforme, consulta por mayor.}
        {plot-hist-uniform-greater}
\grafico{plot-hist-normal-equal}
        {Distribución normal, consulta por igualdad.}
        {plot-hist-normal-equal}
\grafico{plot-hist-normal-greater}
        {Distribución normal, consulta por mayor.}
        {plot-hist-normal-greater}


\subsection{Estimador \texttt{DistributionSteps}}

\grafico{plot-diststep-uniform-equal}
        {Distribución uniforme, consulta por igualdad.}
        {plot-diststep-uniform-equal}
\grafico{plot-diststep-uniform-greater}
        {Distribución uniforme, consulta por mayor.}
        {plot-diststep-uniform-greater}
\grafico{plot-diststep-normal-equal}
        {Distribución normal, consulta por igualdad.}
        {plot-diststep-normal-equal}
\grafico{plot-diststep-normal-greater}
        {Distribución normal, consulta por mayor.}
        {plot-diststep-normal-greater}


\subsection{Estimador \texttt{EstimadorGrupo}}

\grafico{plot-custom-uniform-equal}
        {Distribución uniforme, consulta por igualdad.}
        {plot-custom-uniform-equal}
\grafico{plot-custom-uniform-greater}
        {Distribución uniforme, consulta por mayor.}
        {plot-custom-uniform-greater}
\grafico{plot-custom-normal-equal}
        {Distribución normal, consulta por igualdad.}
        {plot-custom-normal-equal}
\grafico{plot-custom-normal-greater}
        {Distribución normal, consulta por mayor.}
        {plot-custom-normal-greater}


\subsection{Datasets provistos por la cátedra}

A continuación ilustramos los datasets correspondientes a cada columna de la tabla en la base de datos provista por la cátedra.

\grafico{dataset-c0}
        {Columna \emph{c0}}
        {dataset-columna-c0}

\grafico{dataset-c1}
        {Columna \emph{c1}}
        {dataset-columna-c1}

\grafico{dataset-c2}
        {Columna \emph{c2}}
        {dataset-columna-c2}

\grafico{dataset-c3}
        {Columna \emph{c3}}
        {dataset-columna-c3}

\grafico{dataset-c4}
        {Columna \emph{c4}}
        {dataset-columna-c4}

\grafico{dataset-c5}
        {Columna \emph{c5}}
        {dataset-columna-c5}

\grafico{dataset-c6}
        {Columna \emph{c6}}
        {dataset-columna-c6}

\grafico{dataset-c7}
        {Columna \emph{c7}}
        {dataset-columna-c7}

\grafico{dataset-c8}
        {Columna \emph{c8}}
        {dataset-columna-c8}

\grafico{dataset-c9}
        {Columna \emph{c9}}
        {dataset-columna-c9}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Discusión                                                                  %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Discusión}

Pendiente.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Conclusiones                                                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Conclusiones}

Pendiente.


\end{document}
